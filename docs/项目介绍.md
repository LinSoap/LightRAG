# LightRAG 项目介绍

## 项目概述

LightRAG (Light Retrieval-Augmented Generation) 是一个现代化、高性能的检索增强生成系统，由香港大学数据科学实验室开发。该项目结合了知识图谱构建与传统向量检索技术，提供了一个轻量级、可扩展的RAG解决方案，支持多种LLM提供商、灵活的存储后端和企业级API服务。

## 项目结构

```
LightRAG/
├── lightrag/                    # 核心代码目录
│   ├── __init__.py             # 包初始化和版本信息
│   ├── config_manager.py       # 统一配置管理系统
│   ├── constants.py            # 系统核心常量
│   ├── base.py                 # 基础配置和抽象类
│   ├── lightrag.py             # 核心RAG实现 (1,000+ 行)
│   ├── operate.py              # 文档处理和操作接口
│   ├── types.py                # 数据类型定义
│   ├── exceptions.py           # 异常处理
│   ├── utils/                  # 工具函数和实用程序
│   ├── kg/                     # 知识图谱存储实现
│   │   ├── __init__.py
│   │   ├── networkx_storage.py # NetworkX图存储
│   │   ├── nano_vector_db_storage.py  # 内置向量数据库
│   │   └── *.py               # 其他存储实现
│   ├── llm/                    # 大语言模型接口
│   │   ├── __init__.py
│   │   ├── openai.py          # OpenAI集成 (18KB)
│   │   ├── ollama.py          # 本地模型支持
│   │   └── *.py               # 其他LLM提供商
│   ├── api/                    # FastAPI REST API服务
│   │   ├── __init__.py
│   │   ├── main.py            # 应用入口
│   │   ├── schemas/           # Pydantic数据模型
│   │   ├── routers/           # 模块化路由器
│   │   │   ├── documents.py   # 文档管理
│   │   │   ├── query.py       # 查询接口
│   │   │   ├── graph.py       # 知识图谱操作
│   │   │   ├── collection.py  # 多租户管理
│   │   │   └── config.py      # 配置管理
│   │   └── webui/             # Web用户界面
│   └── rerank.py              # 重排序功能
├── docs/                       # 项目文档
├── pyproject.toml             # 项目配置和依赖管理
├── Dockerfile                  # Docker容器化部署
├── docker-compose.yml          # Docker编排配置
└── config.json                # 配置文件模板
```

## 核心功能模块

### 1. 统一配置管理系统 (config_manager.py)
- **集中式配置**: 使用 Pydantic 模型进行类型安全的配置管理
- **模块化配置**: 分离 LightRAGConfig、LLMConfig、EmbeddingConfig、RerankConfig
- **持久化存储**: 配置自动保存到 config.json
- **热重载支持**: 支持运行时配置更新
- **环境变量迁移**: 完全替代传统的 .env 文件配置方式

### 2. 知识图谱存储系统 (kg/)
基于插件架构的存储实现：
- **NetworkXStorage**: 内存图数据库，支持复杂关系查询
- **NanoVectorDBStorage**: 内置向量数据库，支持高维向量相似性搜索
- **JsonKVStorage**: 轻量级键值存储
- **JsonDocStatusStorage**: 文档处理状态跟踪
- **可扩展接口**: 标准化的存储接口，便于添加新的存储后端

### 3. 多厂商LLM集成 (llm/)
支持多种大语言模型提供商：
- **OpenAI**: 完整的GPT模型集成，支持异步调用
- **Anthropic**: Claude系列模型支持
- **本地模型**: Ollama本地LLM服务
- **中国模型**: 智谱AI、SiliconCloud、Jina等
- **开源生态**: Hugging Face、LlamaIndex、LMDeploy等

### 4. 企业级REST API (api/)
基于FastAPI的现代化API服务：
- **模块化路由**: 文档、查询、图谱、集合、配置等独立路由
- **统一响应格式**: GenericResponse[T] 标准化响应结构
- **JWT认证**: 完整的身份验证和授权系统
- **多租户支持**: 基于集合的数据隔离
- **Pydantic验证**: 严格的请求/响应数据验证

### 5. 文档处理引擎 (operate.py)
智能文档处理和知识提取：
- **智能分块**: 基于Token大小的自适应文档分块
- **实体抽取**: 自动识别文档中的实体和关系
- **知识图谱构建**: 自动构建文档间的语义关系网络
- **多格式支持**: PDF、DOCX、PPTX、Excel等格式处理

## 主要技术栈

### 核心框架
- **Python 3.10+**: 现代Python语法和特性
- **FastAPI**: 高性能异步Web框架
- **Pydantic**: 数据验证和序列化 (v2)
- **asyncio**: 原生异步编程支持
- **aiohttp**: 异步HTTP客户端

### 数据处理和AI
- **NetworkX**: 图算法和网络分析
- **NumPy & Pandas**: 数值计算和数据处理
- **tiktoken**: OpenAI Token计算器
- **json_repair**: 损坏JSON修复工具
- **tenacity**: 重试机制库

### 存储和缓存
- **NanoVectorDB**: 内置轻量级向量数据库
- **JSON**: 配置和状态存储
- **asyncpg**: PostgreSQL异步驱动 (可选)
- **psutil**: 系统监控和性能统计

### 部署和运维
- **Docker**: 完整的容器化部署支持
- **Uvicorn**: ASGI服务器
- **Gunicorn**: 生产级WSGI服务器
- **PyInstaller**: 应用打包工具

## 核心特性

### 1. 混合检索架构
- **向量检索**: 基于语义相似性的文档检索
- **图谱检索**: 基于知识图谱的关系推理
- **上下文感知**: 智能的上下文片段选择
- **重排序优化**: 多种重排序算法提升检索精度

### 2. 企业级功能
- **多租户架构**: 支持多用户数据隔离
- **认证授权**: JWT Token认证系统
- **配置管理**: 集中化的配置和版本控制
- **监控日志**: 完整的日志记录和轮转机制

### 3. 高性能设计
- **异步处理**: 全异步架构提升并发性能
- **智能缓存**: LLM响应缓存减少重复计算
- **批量处理**: 支持批量文档处理和向量计算
- **内存优化**: 高效的内存管理和数据结构

### 4. 开发者友好
- **模块化设计**: 清晰的代码结构和接口定义
- **类型安全**: 完整的类型注解和Pydantic验证
- **文档完整**: 详细的API文档和使用指南
- **测试覆盖**: 单元测试和集成测试支持

## 应用场景

1. **企业知识库**: 构建企业内部智能问答和知识管理系统
2. **学术研究**: 文献检索、论文分析和学术知识图谱构建
3. **客户服务**: 智能客服系统、FAQ自动回答
4. **内容创作**: 创意写作辅助、内容生成和优化
5. **教育培训**: 个性化学习助手、智能问答系统

## 部署方式

### 开发环境
```bash
# 本地开发
pip install -e .
lightrag-server --config config.json
```

### 生产环境
```bash
# Docker部署
docker build -t lightrag .
docker run -p 8000:8000 lightrag

# Docker Compose (包含PostgreSQL)
docker-compose up -d
```

### 服务器部署
```bash
# Gunicorn生产部署
lightrag-gunicorn --bind 0.0.0.0:8000 --workers 4
```

## 版本信息

- **当前版本**: 最新开发版本
- **Python要求**: >= 3.10
- **许可证**: MIT License
- **代码规模**: ~18,500+ 行Python代码
- **维护团队**: Zirui Guo (HKU DS Lab)

## 技术亮点

1. **配置管理现代化**: 完全迁移到 config_manager，支持类型安全和热重载
2. **API标准化**: 统一的 GenericResponse 响应格式
3. **存储架构优化**: 插件化的存储实现，易于扩展
4. **LLM集成丰富**: 支持多达10+种LLM提供商
5. **企业级特性**: 完整的认证、多租户、监控功能

## 相关链接

- **GitHub仓库**: https://github.com/HKUDS/LightRAG
- **项目文档**: https://github.com/HKUDS/LightRAG
- **问题反馈**: https://github.com/HKUDS/LightRAG/issues
- **贡献指南**: 请参考项目CONTRIBUTING.md